var e,i,a,g,n,l=function(e,i,a,g){return new(a||(a=Promise))((function(n,l){function m(e){try{s(g.next(e))}catch(e){l(e)}}function t(e){try{s(g.throw(e))}catch(e){l(e)}}function s(e){var i;e.done?n(e.value):(i=e.value,i instanceof a?i:new a((function(e){e(i)}))).then(m,t)}s((g=g.apply(e,i||[])).next())}))},m=function(e,i,a,g,n){if("m"===g)throw new TypeError("Private method is not writable");if("a"===g&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?e!==i||!n:!i.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===g?n.call(e,a):n?n.value=a:i.set(e,a),a},t=function(e,i,a,g){if("a"===a&&!g)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?e!==i||!g:!i.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?g:"a"===a?g.call(e):g?g.value:i.get(e)};class s extends HTMLElement{constructor(){super(),this.productId="",this.cid="",this.windowMode="popup",this.theme="dark",this.size="large",this.language="",e.set(this,s.englishLanguage),i.set(this,"prod"),a.set(this,"dev"===t(this,i,"f")?"iframe.html":"https://get.microsoft.com/iframe.html"),g.set(this,"dev"===t(this,i,"f")?"/images":"https://getbadgecdn.azureedge.net/images"),n.set(this,{isWindows:!1,windowsVersion:null,isEdgeBrowser:!1}),this.getPlatformDetails().then((e=>m(this,n,e,"f"))),m(this,e,s.getSupportedLanguageFromCode(this.language),"f"),this.language=t(this,e,"f").code;const l=this.attachShadow({mode:"open"}),h=this.createStyle(),r=this.createHtml();l.appendChild(h),l.appendChild(r)}updateImageSrc(){var e;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("img");i&&(i.setAttribute("src",this.getImageSource()),i.className=this.getImageClass())}connectedCallback(){}static get observedAttributes(){return["productid","cid","windowmode","theme","size","language"]}attributeChangedCallback(i,a,g){"size"!==i||"large"!==g&&"small"!==g||a===g?"language"!==i||g===a||"string"!=typeof g&&g?"productid"===i&&g!==a&&"string"==typeof g?this.productId=g:"cid"===i&&g!==a&&"string"==typeof g?this.cid=g:"windowmode"!==i||"popup"!==g&&"full"!==g||a===g?"theme"!==i||"dark"!=g&&"light"!==g&&"auto"!==g||a===g||(this.theme=g,this.updateImageSrc()):(this.windowMode=g,this.updateImageSrc()):(m(this,e,s.getSupportedLanguageFromCode(g),"f"),this.language=t(this,e,"f").code,this.updateImageSrc()):(this.size=g,this.updateImageSrc())}createStyle(){const e=document.createElement("style");return e.textContent="\n      :host {\n        display: inline-block;\n        cursor: pointer;\n        height: fit-content;\n      }\n\n      iframe {\n        border: none;\n        width: 0px;\n        height: 0px;\n      }\n\n      img {\n        width: auto;\n        border-radius: 8px;\n      }\n\n      img.small {\n        max-height: 52px;\n      }\n\n      img.large {\n        max-height: 104px;\n      }\n    ",e}createHtml(){const e=document.createElement("div");return e.appendChild(this.createImage()),e.appendChild(this.createIFrame()),e}getPlatformDetails(){return l(this,void 0,void 0,(function*(){const e=navigator;if(e.userAgentData&&e.userAgentData.getHighEntropyValues)try{const i=yield e.userAgentData.getHighEntropyValues(["platform","platformVersion"]),a="Windows"===i.platform;return{isWindows:a,windowsVersion:a?parseFloat((null==i?void 0:i.platformVersion)||""):null,isEdgeBrowser:(e.userAgentData.brands||[]).some((e=>"Microsoft Edge"===e.brand))}}catch(e){}const i=new RegExp(/.?Windows NT (\d+\.?\d?\.?\d?\.?\d?)/gi).exec(navigator.userAgent);return i&&i.length>=2?{isWindows:!0,windowsVersion:parseFloat(i[1]),isEdgeBrowser:!!navigator.userAgent.match("Edg/")}:{isWindows:!1,windowsVersion:null,isEdgeBrowser:!!navigator.userAgent.match("Edg/")}}))}static getSupportedLanguageFromCode(e){if(!e)return s.getSupportedLanguageFromUserAgent();const i=s.supportedLanguages.find((i=>i.code===e.toLowerCase()));return i||s.englishLanguage}static getSupportedLanguageFromUserAgent(){const e=s.supportedLanguages.find((e=>e.name===navigator.language));if(e)return e;if(navigator.languages){var i=navigator.languages.map((e=>s.supportedLanguages.find((i=>i.code===e)))).find((e=>!!e));if(i)return i}const a=navigator.language.indexOf("-");if(a>0){const e=navigator.language.substring(0,a),i=s.supportedLanguages.find((i=>i.name===e));if(i)return i}return s.englishLanguage}createIFrame(){const e=document.createElement("iframe");return e.setAttribute("loading","eager"),e.title="Microsoft Store App Badge",e.src=t(this,a,"f"),e}createImage(){const e=document.createElement("img");return e.setAttribute("part","img"),e.src=this.getImageSource(),e.className=this.getImageClass(),e.alt="Microsoft Store app badge",e.addEventListener("click",(e=>this.launchApp(e))),e}getImageSource(){var i=null;if("dark"===this.theme)i="large"===this.size?t(this,e,"f").imageLarge.fileName:t(this,e,"f").imageSmall.fileName;else if("light"===this.theme)i="large"===this.size?t(this,e,"f").imageLargeLight.fileName:t(this,e,"f").imageSmallLight.fileName;else if("auto"===this.theme){i=window.matchMedia("(prefers-color-scheme:dark)").matches?"large"===this.size?t(this,e,"f").imageLarge.fileName:t(this,e,"f").imageSmall.fileName:"large"===this.size?t(this,e,"f").imageLargeLight.fileName:t(this,e,"f").imageSmallLight.fileName}return`${t(this,g,"f")}/${i}`}getImageClass(){return"large"===this.size?"large":"small"}launchApp(e){this.productId&&(t(this,n,"f").isWindows&&t(this,n,"f").isEdgeBrowser?this.launchStoreAppPdpViaWhitelistedDomain():t(this,n,"f").isWindows?this.launchStoreAppPdp():this.launchStoreWebPdp(e))}launchStoreAppPdp(){const e="ms-windows-store://pdp/?productid="+this.productId+"&cid="+this.cid+("popup"===this.windowMode?"&mode=mini&pos=":"&pos=")+Math.floor(window.screenLeft*window.devicePixelRatio)+","+Math.floor(window.screenTop*window.devicePixelRatio)+","+Math.floor(window.outerWidth*window.devicePixelRatio)+","+Math.floor(window.outerHeight*window.devicePixelRatio);location.href=e,console.log(e)}launchStoreAppPdpViaWhitelistedDomain(){var e,i;if("full"===this.windowMode)this.launchStoreAppPdp();else{const a=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("iframe");if(a){const e={message:"launch",productId:this.productId};null===(i=a.contentWindow)||void 0===i||i.postMessage(e,"*")}}}launchStoreWebPdp(e){const i=`https://apps.microsoft.com/store/detail/${this.productId}?cid=${this.cid}`;e.ctrlKey?window.open(i,"_blank"):window.location.href=i}static createSupportedLanguages(){return[{name:"Arabic",code:"ar",imageSmall:{fileName:"Arabic_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Arabic_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Bosnian",code:"be",imageSmall:{fileName:"Bosnian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Bosnian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Bengali",code:"bn",imageSmall:{fileName:"Bengali_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Bengali_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Bosnian",code:"bs",imageSmall:{fileName:"Bosnian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Bosnian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Bulgarian",code:"bg",imageSmall:{fileName:"Bulgarian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Bulgarian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Chinese (Simplified)",code:"zh-cn",imageSmall:{fileName:"Chinese_Simplified_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Chinese_Simplified_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Chinese (Traditional)",code:"zh-tw",imageSmall:{fileName:"Chinese_Traditional_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Chinese_Traditional_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Croatian",code:"hr",imageSmall:{fileName:"Croatian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Croatian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Czech",code:"cs",imageSmall:{fileName:"Czech_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Czech_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Danish",code:"da",imageSmall:{fileName:"Danish_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Danish_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Dutch",code:"nl",imageSmall:{fileName:"Dutch_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Dutch_L.png"},imageLargeLight:{fileName:"English_L.png"}},s.englishLanguage,{name:"Estonian",code:"et",imageSmall:{fileName:"Estonian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Estonian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Filipino",code:"fil",imageSmall:{fileName:"Filipino_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Filipino_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Finnish",code:"fi",imageSmall:{fileName:"Finnish_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Finnish_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"French",code:"fr",imageSmall:{fileName:"French_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"French_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"German",code:"de",imageSmall:{fileName:"German_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"German_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Greek",code:"el",imageSmall:{fileName:"Greek_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Greek_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Hebrew",code:"he",imageSmall:{fileName:"Hebrew_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Hebrew_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Hindi",code:"hi",imageSmall:{fileName:"Hindi_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Hindi_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Hungarian",code:"hu",imageSmall:{fileName:"Hungarian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Hungarian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Indonesian",code:"id",imageSmall:{fileName:"Indonesian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Indonesian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Italian",code:"it",imageSmall:{fileName:"Italian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Italian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Japanese",code:"ja",imageSmall:{fileName:"Japanese_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Japanese_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Korean",code:"ko",imageSmall:{fileName:"Korean_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Korean_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Latvian",code:"lv",imageSmall:{fileName:"Latvian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Latvian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Lithuanian",code:"lt",imageSmall:{fileName:"Lithuanian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Lithuanian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Malay",code:"ms",imageSmall:{fileName:"Malay_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Malay_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Norwegian",code:"no",imageSmall:{fileName:"Norwegian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Norwegian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Polish",code:"pl",imageSmall:{fileName:"Polish_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Polish_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Portuguese (Brazil)",code:"pt-br",imageSmall:{fileName:"Portuguese_Brazil_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Portuguese_Brazil_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Portuguese (Portugal)",code:"pt",imageSmall:{fileName:"Portuguese_Portugal_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Portuguese_Portugal_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Romanian",code:"ro",imageSmall:{fileName:"Romanian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Romanian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Russian",code:"ru",imageSmall:{fileName:"Russian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Russian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Serbian",code:"sr",imageSmall:{fileName:"Serbian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Serbian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Slovak",code:"sk",imageSmall:{fileName:"Slovak_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Slovak_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Slovenian",code:"sl",imageSmall:{fileName:"Slovenian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Slovenian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Spanish",code:"es",imageSmall:{fileName:"Spanish_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Spanish_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Swahili",code:"sw",imageSmall:{fileName:"Swahili_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Swahili_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Swedish",code:"sv",imageSmall:{fileName:"Swedish_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Swedish_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Thai",code:"th",imageSmall:{fileName:"Thai_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Thai_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Turkish",code:"tr",imageSmall:{fileName:"Turkish_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Turkish_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Ukranian",code:"uk",imageSmall:{fileName:"Ukranian_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Ukranian_L.png"},imageLargeLight:{fileName:"English_L.png"}},{name:"Vietnamese",code:"vi",imageSmall:{fileName:"Vietnamese_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"Vietnamese_L.png"},imageLargeLight:{fileName:"English_L.png"}}]}}e=new WeakMap,i=new WeakMap,a=new WeakMap,g=new WeakMap,n=new WeakMap,s.englishLanguage={name:"English",code:"en",imageSmall:{fileName:"English_S.png"},imageSmallLight:{fileName:"English_L.png"},imageLarge:{fileName:"English_L.png"},imageLargeLight:{fileName:"English_L.png"}},s.supportedLanguages=s.createSupportedLanguages(),customElements.define("ms-store-badge",s);
